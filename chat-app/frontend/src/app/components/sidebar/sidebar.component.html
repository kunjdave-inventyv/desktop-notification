<div class="sidebar-container">
  <div class="sidebar-header">
    <div class="header-top">
      <h2>Chat</h2>
      <div class="header-actions">
        <!-- Add search/new chat icons here if needed -->
      </div>
    </div>
    
    @if (chatService.currentUser()) {
      <div class="current-profile">
        <div class="user-avatar current">{{chatService.currentUser()![0]}}</div>
        <div class="user-details">
          <span class="user-name">{{chatService.currentUser()}}</span>
          <span class="user-status available">Available</span>
        </div>
        <button class="icon-btn logout" (click)="logout()" title="Logout">
          <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></svg>
        </button>
      </div>
    }
  </div>

  <div class="sidebar-content">
    @if (!chatService.currentUser()) {
      <div class="teams-login">
        <div class="login-header">
          <img src="/favicon.ico" alt="Logo" class="login-logo">
          <h3>Sign in to Chat</h3>
        </div>
        <div class="login-list">
          @for (user of users; track user) {
            <button class="login-item" (click)="login(user)">
              <div class="user-avatar">{{user[0]}}</div>
              <span>Login as {{user}}</span>
            </button>
          }
        </div>
      </div>
    } @else {
      <div class="chat-list">
        @for (user of users; track user) {
          @if (user !== chatService.currentUser()) {
            <div 
              class="chat-item" 
              [class.active]="chatService.currentChatUser() === user"
              (click)="selectUser(user)"
            >
              <div class="user-avatar">{{user[0]}}</div>
              <div class="chat-info">
                <div class="chat-header-row">
                  <span class="chat-name">{{user}}</span>
                  <!-- <span class="chat-time">10:30 AM</span> -->
                </div>
                <span class="chat-preview">Start a conversation...</span>
              </div>
            </div>
          }
        }
      </div>
    }
  </div>
</div>
